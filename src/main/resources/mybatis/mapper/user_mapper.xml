<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.mmko.dao.IUserDao">

    <resultMap id="DataMap" type="cn.mmko.po.UserPo">
        <id column="user_id" property="userId"/>
        <result column="username" property="userName"/>
        <result column="password_hash" property="passwordHash"/>
        <result column="password_salt" property="passwordSalt"/>
        <result column="phone" property="phone"/>
        <result column="user_status" property="userStatus"/>
        <result column="register_time" property="registerTime"/>
        <result column="last_login_time" property="lastLoginTime"/>
        <result column="login_ip" property="loginIp"/>
    </resultMap>
    <insert id="insertUser" parameterType="cn.mmko.po.UserPo" useGeneratedKeys="true" keyProperty="userId">
        insert into t_user(username,phone,password_hash,password_salt)
        values(#{userName},#{phone},#{passwordHash},#{passwordSalt})
    </insert>
    <update id="updateCustomerStatus">
        update t_user set user_status=#{status} where user_id=#{userId}
    </update>
    <select id="queryUserByUserName" resultType="cn.mmko.po.UserPo" resultMap="DataMap">
        select user_id,username,password_hash,password_salt,phone,user_status from t_user where username=#{username}
    </select>
    <select id="checkUserStatus" resultType="integer">
        select user_status from t_user where user_id=#{userId}
    </select>


</mapper>